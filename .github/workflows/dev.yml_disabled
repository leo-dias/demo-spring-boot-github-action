name: Rebase UAT on Dev changes

on:
  push:
    branches:
      - dev

jobs:
  rebase:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v2
        with:
          ref: uat
          fetch-depth: 0  # Required for rebasing

      - name: Create rebase PR
        uses: repo-sync/pull-request@v2
        with:
          source_branch: "dev"
          destination_branch: "uat"
          pr_title: "Rebase UAT on Dev changes"
          pr_body: "This PR rebases the UAT branch on recent Dev changes. **It requires manual approval before it can be merged.**"
          pr_label: "rebase"
          pr_allow_empty: false
          github_token: ${{ secrets.MY_ACTION_TOKEN }}